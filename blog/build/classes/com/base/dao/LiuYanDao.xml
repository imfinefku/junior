<?xml version="1.0" encoding="UTF-8" ?> 
    <!DOCTYPE mapper 
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.base.dao.LiuYanDao">
	<insert id="insertLy" parameterType="com.base.bean.LiuYan">
		insert into liuyan(id,name,email,content,zan,cai,lytype,type,ssly,sstext,time,ip)
		values(#{id},#{name},#{email},#{content},#{zan},#{cai},#{lytype},#{type},#{ssly},#{sstext},#{time},#{ip})
	</insert>
	<select id="getLybFy" parameterType="HashMap" resultType="HashMap">
		select *,(#{start}+1) ls
		from liuyan
		where lytype=0
		order by time desc
		limit #{start},#{limit}
	</select>
	<select id="getLybFyTotal" parameterType="HashMap" resultType="Integer">
		select count(*)
		from liuyan
		where lytype=0
	</select>
	<select id="zanPingLun" parameterType="HashMap">
		update liuyan
		set zan=zan+1
		where id=#{id}
	</select>
	<select id="caiPingLun" parameterType="HashMap">
		update liuyan
		set cai=cai+1
		where id=#{id}
	</select>
	<select id="getTextLyFy" parameterType="HashMap" resultType="HashMap">
		select *,(#{start}+1) ls
		from liuyan
		where lytype=1
		and sstext=#{id}
		order by time desc
		limit #{start},#{limit}
	</select>
	<select id="getTextLyFyTotal" parameterType="HashMap" resultType="Integer">
		select count(*)
		from liuyan
		where lytype=1
		and sstext=#{id}
	</select>
	<select id="getNewLy" resultType="HashMap">
		select id,name,content,time,lytype
		from liuyan
		order by time desc
		limit 0,5
	</select>
</mapper> 
